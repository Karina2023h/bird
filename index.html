<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>–ú–∞–≥—ñ—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ—Ä—Ç—Ä–µ—Ç–∞ ‚Äî –ß–æ—Ä–Ω–∏–π –ó–æ—Ä–µ–ø–∞–¥</title>

  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      overflow: hidden;
      height: 100vh;

      background: linear-gradient(120deg, #ffe8ea, #ffd9c8, #fff5e7);
      background-size: 300% 300%;
      animation: bgMove 18s ease-in-out infinite;

      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: relative;
    }

    @keyframes bgMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* -------------------------
          –ß–û–†–ù–ò–ô –ó–û–†–ï–ü–ê–î
    ------------------------- */
    #starfall {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
      overflow: hidden;
    }

    .star {
      position: absolute;
      width: 2px;
      height: 70px;
      background: linear-gradient(180deg, rgba(0,0,0,1), rgba(0,0,0,0));
      opacity: 0.85;
      transform: rotate(35deg);
      filter: blur(1px);
      animation: fall 2s linear infinite;
    }

    @keyframes fall {
      0% {
        transform: translateY(-150px) translateX(0) rotate(35deg);
        opacity: 0;
      }
      15% {
        opacity: 1;
      }
      100% {
        transform: translateY(900px) translateX(-300px) rotate(35deg);
        opacity: 0;
      }
    }

    /* -------------------------
          –¢–í–û–á –ï–õ–ï–ú–ï–ù–¢–ò
    ------------------------- */
    .hidden { display: none; }

    button {
      padding: 26px 40px;
      font-size: 56px;
      background: linear-gradient(135deg, #ff9a76, #ff5e7d);
      border: none;
      border-radius: 100px;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.25s ease, opacity 0.5s ease;
      box-shadow: 0 6px 18px rgba(0,0,0,0.20);
      z-index: 5;
      opacity: 0;
    }
    .btn-visible { opacity: 1; }

    button:hover { transform: scale(1.07); }

    canvas {
      margin-top: 20px;
      border-radius: 18px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.18);
      background-color: #fff;
      opacity: 0;
      transition: opacity 1.2s ease;
      z-index: 3;
    }

    .visible { opacity: 1; }

    #particles {
      position: absolute;
      inset: 0;
      z-index: 4;
      pointer-events: none;
    }

    #finalText {
      margin-top: 25px;
      font-size: 42px;
      color: #5a4a4a;
      font-weight: 700;
      text-align: center;
      opacity: 0;
      transition: opacity 1.5s ease;
      z-index: 4;
    }

    #finalText.visible { opacity: 1; }
  </style>
</head>

<body>

  <div id="starfall"></div>

  <button id="btn1">‚ú® –ù–∞—Ç–∏—Å–Ω–∏ –º–µ–Ω–µ ‚ú®</button>
  <button id="btn2" class="hidden">‚ú® –¢–µ–ø–µ—Ä –º–µ–Ω–µ ‚ú®</button>

  <canvas id="canvas" width="850" height="850"></canvas>

  <div id="particles"></div>

  <audio id="bgMusic" src="./Mandy_Moore_-_Only_Hope.mp3" preload="auto"></audio>

  <div id="finalText">–ù–µ–≤–µ–ª–∏–∫–∏–π –ø–æ–¥–∞—Ä—É–Ω–æ–∫ –≤—ñ–¥ –º–µ–Ω–µ. –•–∞–π —Ç–æ–±—ñ —Ü–µ –ø—ñ–¥–Ω—ñ–º–µ –Ω–∞—Å—Ç—Ä—ñ–π üòä</div>

  <script>
    /* ----------------------------
          –ß–û–†–ù–ò–ô –ó–û–†–ï–ü–ê–î
    ---------------------------- */
    const starfall = document.getElementById("starfall");

    function createStar() {
      const star = document.createElement("div");
      star.className = "star";

      star.style.left = Math.random() * window.innerWidth + "px";
      star.style.animationDuration = (1.6 + Math.random() * 1.6) + "s";
      star.style.animationDelay = Math.random() * 1.2 + "s";

      starfall.appendChild(star);
      setTimeout(() => star.remove(), 3000);
    }

    setInterval(createStar, 120);


    /* ----------------------------
           –í–ï–°–¨ –¢–í–û–ô –ö–û–î
    ---------------------------- */

    const btn1 = document.getElementById("btn1");
    const btn2 = document.getElementById("btn2");
    const music = document.getElementById("bgMusic");
    let musicStarted = false;
    music.volume = 0.35;

    setTimeout(() => btn1.classList.add("btn-visible"), 600);

    btn1.onclick = () => {
      if (!musicStarted) {
        music.play();
        musicStarted = true;

        setTimeout(() => {
          music.pause();
          music.currentTime = 0;
        }, 40000);
      }

      btn1.style.opacity = 0;
      setTimeout(() => btn1.classList.add("hidden"), 600);

      setTimeout(() => {
        btn2.classList.remove("hidden");
        btn2.classList.add("btn-visible");
      }, 900);
    };

    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const img = new Image();
    img.src = './snapedit_1763492000742.jpeg';

    const step = 28;
    const positions = [];
    let scale = 1, drawOffsetX = 0, drawOffsetY = 0;

    img.onload = () => {
      const iw = img.width;
      const ih = img.height;
      scale = Math.min(canvas.width/iw, canvas.height/ih);

      const sw = iw * scale;
      const sh = ih * scale;
      drawOffsetX = (canvas.width - sw)/2;
      drawOffsetY = (canvas.height - sh)/2;

      for (let y=0; y<ih; y+=step) {
        for (let x=0; x<iw; x+=step) {
          positions.push({x,y});
        }
      }
      shuffleArray(positions);
    };

    function shuffleArray(a){
      for (let i=a.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i],a[j]]=[a[j],a[i]];
      }
    }

    btn2.onclick = () => {
      btn2.style.opacity = 0;
      setTimeout(() => btn2.classList.add("hidden"), 700);
      startDrawing();
    };

    function startDrawing(){
      const finalText = document.getElementById('finalText');
      canvas.classList.add('visible');
      finalText.classList.remove('visible');
      ctx.clearRect(0,0,canvas.width,canvas.height);

      shuffleArray(positions);
      let i=0;

      const interval = setInterval(()=>{
        if(i>=positions.length){
          clearInterval(interval);
          triggerFireworks();
          finalText.classList.add('visible');
          return;
        }

        const pos = positions[i];
        const dx = drawOffsetX + pos.x * scale;
        const dy = drawOffsetY + pos.y * scale;
        const dW = step * scale;
        const dH = step * scale;

        ctx.drawImage(img, pos.x, pos.y, step, step, dx, dy, dW, dH);

        /* üî• –°–Ü–¢–ö–ê –ü–û–í–ù–Ü–°–¢–Æ –ü–†–ò–ë–†–ê–ù–ê */

        i++;
      }, 9);
    }

    /* ----------------------------
         –§–ï–Ñ–†–í–ï–†–ö–ò
    ---------------------------- */
    function triggerFireworks(){
      const container = document.getElementById('particles');
      const rect = canvas.getBoundingClientRect();
      const cx = rect.width/2;
      const cy = rect.height/2;

      for(let i=0;i<65;i++){
        const p=document.createElement('div');
        p.style.position='absolute';
        p.style.width='12px';
        p.style.height='12px';
        p.style.borderRadius='50%';
        p.style.background=randomColor();
        p.style.left = cx+'px';
        p.style.top = cy+'px';
        p.style.opacity='0.9';
        p.style.transition='transform 1.3s ease-out, opacity 1.5s ease-out';
        container.appendChild(p);

        requestAnimationFrame(()=>{
          p.style.transform=`translate(${(Math.random()-0.5)*700}px, ${(Math.random()-0.5)*700}px)`;
          p.style.opacity='0';
        });

        setTimeout(()=>p.remove(),1700);
      }
    }

    function randomColor(){
      const c=['#ff6b6b','#ff9a76','#feca57','#48dbfb','#9b59b6','#54a0ff'];
      return c[Math.floor(Math.random()*c.length)];
    }

  </script>

</body>

</html>

